# STM32æœºå™¨äººæ§åˆ¶ç³»ç»Ÿ - æ ‘è“æ´¾æœåŠ¡ç«¯

è¿™æ˜¯ä¸“é—¨ä¸ºæ ‘è“æ´¾ä¼˜åŒ–çš„æœºå™¨äººæ§åˆ¶æœåŠ¡ç«¯ç‰ˆæœ¬ï¼Œä¸åŒ…å«å®¢æˆ·ç«¯ç›¸å…³çš„ä¾èµ–ï¼ˆå¦‚é”®ç›˜ç›‘å¬åº“ï¼‰ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ å¼‚æ­¥ç½‘ç»œæœåŠ¡ç«¯ï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯è¿æ¥
- ğŸ“¡ ä¸²å£é€šä¿¡æ§åˆ¶æœºå™¨äººè¿åŠ¨
- âš™ï¸ é…ç½®æ–‡ä»¶é©±åŠ¨çš„è¿åŠ¨å‘½ä»¤
- ğŸ”„ è‡ªåŠ¨é‡è¿å’Œå¿ƒè·³æ£€æµ‹
- ğŸ“ è¯¦ç»†çš„æ—¥å¿—è®°å½•

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…ç³»ç»Ÿä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
sudo apt-get update
sudo apt-get install python3-dev  # å¦‚æœé‡åˆ°ç¼–è¯‘é—®é¢˜

# å®‰è£…Pythonä¾èµ–
uv sync
```

### é…ç½®æ–‡ä»¶

- `robot_config.yaml`: æœºå™¨äººé…ç½®ï¼ˆä¸²å£è®¾ç½®ã€è¿åŠ¨å‘½ä»¤ç­‰ï¼‰
- `network_config.yaml`: ç½‘ç»œé…ç½®ï¼ˆæœåŠ¡å™¨ç«¯å£ç­‰ï¼‰

### è¿è¡ŒæœåŠ¡ç«¯

```bash
# ä½¿ç”¨uvè¿è¡Œ
uv run robot-server

# æˆ–è€…ç›´æ¥è¿è¡Œ
python robot_control_server.py
```

## ç½‘ç»œåè®®

æœåŠ¡ç«¯ç›‘å¬TCPè¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€JSONæ ¼å¼çš„æ§åˆ¶å‘½ä»¤ï¼š

```json
{
  "type": "control",
  "command": "forward",
  "timestamp": 1234567890.123
}
```

æ”¯æŒçš„å‘½ä»¤ç±»å‹ï¼š
- `control`: è¿åŠ¨æ§åˆ¶å‘½ä»¤
- `ping`: å¿ƒè·³æ£€æµ‹

## æ¶æ„è¯´æ˜

æœ¬ç›®å½•æ˜¯å®Œæ•´çš„æ ‘è“æ´¾æœåŠ¡ç«¯å®ç°ï¼Œä¸ä¸»pythonç›®å½•çš„åŒºåˆ«ï¼š

- âœ… åªåŒ…å«æœåŠ¡ç«¯å¿…è¦çš„ä¾èµ–
- âœ… ç§»é™¤å®¢æˆ·ç«¯ç›¸å…³çš„åº“ï¼ˆå¦‚pynputã€evdevï¼‰
- âœ… ä¼˜åŒ–äº†ä¾èµ–å®‰è£…ä½“éªŒ
- âœ… ä¸“é—¨çš„æ„å»ºé…ç½®

## æ—¥å¿—

æœåŠ¡ç«¯ä¼šç”Ÿæˆ`robot_server.log`æ–‡ä»¶ï¼ŒåŒ…å«è¯¦ç»†çš„è¿è¡Œæ—¥å¿—ã€‚

## æ•…éšœæ’é™¤

### ä¸²å£è¿æ¥é—®é¢˜
- æ£€æŸ¥ä¸²å£è®¾å¤‡æ˜¯å¦å­˜åœ¨ï¼š`ls /dev/tty*`
- ç¡®è®¤ç”¨æˆ·æœ‰ä¸²å£è®¿é—®æƒé™ï¼š`sudo usermod -a -G dialout $USER`

### ç½‘ç»œè¿æ¥é—®é¢˜
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -tlnp | grep :8888`
- ç¡®è®¤é˜²ç«å¢™è®¾ç½®

### ä¾èµ–å®‰è£…é—®é¢˜
- ç¡®ä¿Pythonç‰ˆæœ¬ >= 3.11
- å¦‚æœuvå®‰è£…å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨pipï¼š`pip install -e .`
